<div class="card shadow-sm h-100">
  <div class="card-header bg-primary text-white">
    <h5 class="mb-0">User Stats</h5>
  </div>
  @if (isLoading()) {
  <div class="card-body d-flex justify-content-center align-items-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  } @else {
  <div class="card-body">
    <div class="user-info mb-3">
      <h4 class="mb-1">{{ user()?.username }}</h4>
      <div class="level-badge">Level {{ user()?.level }}</div>
    </div>

    <app-xp-progress-bar
      [level]="user()?.level || 1"
      [currentXp]="user()?.currentXp || 0"
      [xpToNextLevel]="user()?.xpToNextLevel || 100"
    >
    </app-xp-progress-bar>

    @if (userStats()) {
    <div class="stats-grid mt-4">
      <div class="stat-item">
        <div class="stat-value">{{ userStats()?.xpBonus || 0 }}%</div>
        <div class="stat-label">XP Bonus</div>
      </div>
      <div class="stat-item">
        <div class="stat-value">{{ userStats()?.coinBonus || 0 }}%</div>
        <div class="stat-label">Coin Bonus</div>
      </div>
      <div class="stat-item">
        <div class="stat-value">{{ walletInfo()?.coins || 0 }}</div>
        <div class="stat-label">Coins</div>
      </div>
    </div>
    }
  </div>
  }
</div>
